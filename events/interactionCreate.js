const _0x3ff20c=(function(){let _0x3766a6=!![];return function(_0x473d90,_0x31461e){const _0x24046c=_0x3766a6?function(){if(_0x31461e){const _0xe42511=_0x31461e['apply'](_0x473d90,arguments);return _0x31461e=null,_0xe42511;}}:function(){};return _0x3766a6=![],_0x24046c;};}()),_0x1f84cd=_0x3ff20c(this,function(){return _0x1f84cd['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0x1f84cd)['search']('(((.+)+)+)+$');});_0x1f84cd();const {Discord,ActionRowBuilder,ButtonBuilder,EmbedBuilder,InteractionType,Message,StringSelectMenuBuilder,ModalBuilder,TextInputBuilder,TextInputStyle}=require('discord.js'),fs=require('fs'),yaml=require('js-yaml'),config=yaml['load'](fs['readFileSync']('./config.yml','utf8')),utils=require('../utils.js'),moment=require('moment-timezone');let Cooldown=new Map();module['exports']=async(_0xf699bc,_0x19f694)=>{if(_0x19f694['isChatInputCommand']())return;let _0x590bfd;_0x19f694['values']&&config['TicketSettings']['SelectMenu']?_0x590bfd=_0x19f694['values'][0x0]:_0x590bfd=_0x19f694['customId'];if(config['TicketSettings']['SelectMenu']&&_0x19f694['customId']==='categorySelect')try{await _0x19f694['channel']['messages']['fetch'](_0xf699bc['ticketPanel']['get'](config['GuildID'],'msgID'))['then'](async _0x57b315=>{if(!_0x57b315)return console['log']('\x1b[31m%s\x1b[0m','[WARNING]\x20Panel\x20message\x20not\x20found!\x20Please\x20re-send\x20the\x20panel\x20using\x20the\x20command.');let _0x14fcf2=new StringSelectMenuBuilder()['setCustomId']('categorySelect')['setPlaceholder'](config['Locale']['selectCategory'])['setMinValues'](0x1)['setMaxValues'](0x1)['addOptions'](_0xf699bc['ticketPanel']['get'](config['GuildID'],'selectMenuOptions')),_0x4b3259=new ActionRowBuilder()['addComponents'](_0x14fcf2);await _0x57b315['edit']({'components':[_0x4b3259]});});}catch(_0x3f6e3e){if(_0x3f6e3e)return console['log']('\x1b[31m%s\x1b[0m','[WARNING]\x20Panel\x20message\x20not\x20found!\x20Please\x20re-send\x20the\x20panel\x20using\x20the\x20command.');}async function _0x3f79b3(_0x3624af,_0x1cbf04,_0x100f05){if(config['WorkingHours']['Enabled']){const _0x14886a=/^(\d{1,2}:\d{2})-(\d{1,2}:\d{2})$/,_0x517b96=config['WorkingHours']['WorkingHours']['match'](_0x14886a);!_0x517b96&&console['log']('\x1b[31m%s\x1b[0m','[ERROR]\x20Invalid\x20working\x20hours\x20configuration\x20(format),\x20Contact\x20support\x20and\x20provide\x20your\x20config.yml\x20file.');const _0x60c46f=moment()['tz'](config['WorkingHours']['Timezone']),_0x1348a6=_0x60c46f['format']('YYYY-MM-DD'),_0x49b3c7=moment['tz'](_0x1348a6+'\x20'+_0x517b96[0x1],'YYYY-MM-DD\x20H:mm',config['WorkingHours']['Timezone']),_0x27a84c=moment['tz'](_0x1348a6+'\x20'+_0x517b96[0x2],'YYYY-MM-DD\x20H:mm',config['WorkingHours']['Timezone']);(!_0x49b3c7['isValid']()||!_0x27a84c['isValid']()||_0x49b3c7['isSameOrAfter'](_0x27a84c))&&console['log']('\x1b[31m%s\x1b[0m','[ERROR]\x20Invalid\x20working\x20hours\x20configuration,\x20Contact\x20support\x20and\x20provide\x20your\x20config.yml\x20file.');const _0x26a2c3=_0x60c46f['isBetween'](_0x49b3c7,_0x27a84c);if(!_0x26a2c3&&!config['WorkingHours']['AllowTicketsOutsideWorkingHours']){const _0x3094b2=_0x49b3c7['unix'](),_0xdd482b=_0x27a84c['unix']();let _0x48a825=config['Locale']['outsideWorkingHours']['replace'](/{startTime}/g,'<t:'+_0x3094b2+':t>')['replace'](/{endTime}/g,'<t:'+_0xdd482b+':t>'),_0xd0a526=new EmbedBuilder()['setTitle'](config['Locale']['outsideWorkingHoursTitle'])['setColor']('Red')['setDescription'](_0x48a825)['setFooter']({'text':''+_0x3624af['user']['username'],'iconURL':''+_0x3624af['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();if(!_0x1cbf04['Questions']||_0x1cbf04['Questions']?.['length']<0x0)return _0x3624af['editReply']({'embeds':[_0xd0a526],'ephemeral':!![]});if(_0x1cbf04['Questions']&&_0x1cbf04['Questions']?.['length']>0x0)return _0x3624af['reply']({'embeds':[_0xd0a526],'ephemeral':!![]});}}const _0x12af71=Cooldown['get'](_0x3624af['user']['id']),_0xc63dbf=Math['ceil']((_0x12af71+(config['TicketSettings']['TicketCooldown']*0x3e8-Date['now']()))/0x3e8),_0x3caccb=Math['floor'](Date['now']()/0x3e8)+_0xc63dbf;let _0x402a7a=config['Locale']['cooldownEmbedMsg']['replace'](/{time}/g,'<t:'+_0x3caccb+':R>'),_0x27fe45=new EmbedBuilder()['setTitle'](config['Locale']['cooldownEmbedMsgTitle'])['setColor']('Red')['setDescription'](_0x402a7a)['setFooter']({'text':''+_0x3624af['user']['username'],'iconURL':''+_0x3624af['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();if(Cooldown['has'](_0x3624af['user']['id'])&&!_0x1cbf04['Questions']||_0x1cbf04['Questions']?.['length']<0x0)return _0x3624af['editReply']({'embeds':[_0x27fe45],'ephemeral':!![]});if(Cooldown['has'](_0x3624af['user']['id'])&&_0x1cbf04['Questions']&&_0x1cbf04['Questions']?.['length']>0x0)return _0x3624af['reply']({'embeds':[_0x27fe45],'ephemeral':!![]});let _0x11ddb4='\x0a\x0a['+new Date()['toLocaleString']()+']\x20[TICKET\x20CREATION]\x20Button:\x20'+_0x1cbf04+',\x20User:\x20'+_0x3624af['user']['username'];fs['appendFile']('./logs.txt',_0x11ddb4,_0x438597=>{if(_0x438597)console['log'](_0x438597);});if(_0x1cbf04['RequiredRoles']&&_0x1cbf04['RequiredRoles']?.['length']>0x0){let _0x41e2d3=![],_0x5378f9=new EmbedBuilder()['setTitle'](config['Locale']['requiredRoleTitle'])['setColor']('Red')['setDescription'](config['Locale']['requiredRoleMissing'])['setFooter']({'text':''+_0x3624af['user']['username'],'iconURL':''+_0x3624af['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();for(let _0x37f1b4=0x0;_0x37f1b4<_0x1cbf04['RequiredRoles']['length'];_0x37f1b4++){if(!_0x3624af['guild']['roles']['cache']['get'](_0x1cbf04['RequiredRoles'][_0x37f1b4])){_0x41e2d3=!![];break;}if(_0x3624af['member']['roles']['cache']['has'](_0x1cbf04['RequiredRoles'][_0x37f1b4])){_0x41e2d3=!![];break;}}if(_0x41e2d3===![]&&!_0x1cbf04['Questions']||_0x1cbf04['Questions']?.['length']<0x0)return _0x3624af['editReply']({'embeds':[_0x5378f9],'ephemeral':!![]});if(_0x41e2d3===![]&&_0x1cbf04['Questions']&&_0x1cbf04['Questions']?.['length']>0x0)return _0x3624af['reply']({'embeds':[_0x5378f9],'ephemeral':!![]});}let _0x4d063f=new EmbedBuilder()['setTitle'](config['Locale']['userBlacklistedTitle'])['setColor']('Red')['setDescription'](config['Locale']['userBlacklistedMsg'])['setFooter']({'text':''+_0x3624af['user']['username'],'iconURL':''+_0x3624af['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();if(_0xf699bc['blacklistedUsers']['has'](''+_0x3624af['user']['id'])&&_0xf699bc['blacklistedUsers']['get'](''+_0x3624af['user']['id'],'blacklisted')&&!_0x1cbf04['Questions']||_0x1cbf04['Questions']?.['length']<0x0)return _0x3624af['editReply']({'embeds':[_0x4d063f],'ephemeral':!![]});if(_0xf699bc['blacklistedUsers']['has'](''+_0x3624af['user']['id'])&&_0xf699bc['blacklistedUsers']['get'](''+_0x3624af['user']['id'],'blacklisted')&&_0x1cbf04['Questions']&&_0x1cbf04['Questions']?.['length']>0x0)return _0x3624af['reply']({'embeds':[_0x4d063f],'ephemeral':!![]});let _0x3a1af3=![],_0x2a4ec4=new EmbedBuilder()['setTitle'](config['Locale']['RoleBlacklistedTitle'])['setColor']('Red')['setDescription'](config['Locale']['RoleBlacklistedMsg'])['setFooter']({'text':''+_0x3624af['user']['username'],'iconURL':''+_0x3624af['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();for(let _0x464295=0x0;_0x464295<config['TicketSettings']['BlacklistedRoles']['length'];_0x464295++){if(_0x3624af['member']['roles']['cache']['has'](config['TicketSettings']['BlacklistedRoles'][_0x464295]))_0x3a1af3=!![];}if(_0x3a1af3===!![]&&!config['buttonConfig']['Questions']||_0x1cbf04['Questions']?.['length']<0x0)return _0x3624af['editReply']({'embeds':[_0x2a4ec4],'ephemeral':!![]});if(_0x3a1af3===!![]&&_0x1cbf04['Questions']&&_0x1cbf04['Questions']?.['length']>0x0)return _0x3624af['reply']({'embeds':[_0x2a4ec4],'ephemeral':!![]});if(!_0x3624af['guild']['channels']['cache']['get'](_0x1cbf04['TicketCategoryID']))return console['log']('\x1b[31m%s\x1b[0m','[WARNING]\x20'+_0x100f05+'.TicketCategoryID\x20is\x20not\x20a\x20valid\x20category!');let _0x35a7ef=config['TicketSettings']['MaxTickets'],_0x554170=0x0,_0x2b7822=config['Locale']['AlreadyOpenMsg']['replace'](/{max}/g,''+_0x35a7ef),_0x4d8f71=new EmbedBuilder()['setTitle'](config['Locale']['AlreadyOpenTitle'])['setColor']('Red')['setDescription'](_0x2b7822)['setFooter']({'text':''+_0x3624af['user']['username'],'iconURL':''+_0x3624af['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();await _0x3624af['guild']['channels']['cache']['forEach'](_0x386228=>{if(_0xf699bc['tickets']['has'](_0x386228['id'])){let _0x254c01=_0xf699bc['tickets']['get'](''+_0x386228['id'],'userID');_0x254c01&&_0x254c01===_0x3624af['user']['id']&&_0xf699bc['tickets']['get'](_0x386228['id'],'status')!=='Closed'&&(_0x554170=_0x554170+0x1);}});if(_0x554170>=_0x35a7ef&&(!_0x1cbf04['Questions']||_0x1cbf04['Questions']?.['length']===0x0))return _0x3624af['editReply']({'embeds':[_0x4d8f71],'ephemeral':!![]})['then'](_0x5ab716=>{_0x554170=0x0;});if(_0x554170>=_0x35a7ef&&_0x1cbf04['Questions']&&_0x1cbf04['Questions']?.['length']>0x0)return _0x3624af['reply']({'embeds':[_0x4d8f71],'ephemeral':!![]})['then'](_0x3e43f8=>{_0x554170=0x0;});let _0x23c981=[{'id':_0x3624af['member']['id'],'allow':['SendMessages','ViewChannel','AttachFiles','EmbedLinks','ReadMessageHistory']},{'id':_0x3624af['guild']['id'],'deny':['SendMessages','ViewChannel']},{'id':_0xf699bc['user']['id'],'allow':['SendMessages','ViewChannel']}];await _0x1cbf04['SupportRoles']['forEach'](_0x7354a9=>{role=_0x3624af['guild']['roles']['cache']['get'](_0x7354a9);if(!role)return console['log']('\x1b[31m%s\x1b[0m','[WARNING]\x20'+_0x100f05+'.SupportRoles\x20is\x20not\x20a\x20valid\x20role!');let _0xe62102={'id':role['id'],'allow':['SendMessages','ViewChannel','AttachFiles','EmbedLinks','ReadMessageHistory']};_0x23c981['push'](_0xe62102);});let _0x37540e=_0x1cbf04['ChannelName']['replace'](/{username}/g,''+_0x3624af['user']['username'])['replace'](/{total-tickets}/g,''+_0xf699bc['globalStats']['get'](''+_0x3624af['guild']['id'],'totalTickets'))['replace'](/{user-id}/g,''+_0x3624af['user']['id']);const _0x15a230=await _0x3624af['guild']['channels']['create']({'name':_0x37540e,'type':0x0,'parent':_0x1cbf04['TicketCategoryID'],'topic':config['TicketSettings']['ChannelTopic']['replace'](/{username}/g,'<@!'+_0x3624af['user']['id']+'>')['replace'](/{category}/g,''+_0x1cbf04['TicketName']),'permissionOverwrites':_0x23c981}),_0x4a8ede=new ModalBuilder()['setCustomId']('questionModal'+_0x15a230['id'])['setTitle'](_0x1cbf04['TicketName']);_0x1cbf04['Questions']&&_0x1cbf04['Questions']?.['length']>0x0&&_0x1cbf04['Questions']['forEach'](_0x2b7e03=>{const _0x521813=new TextInputBuilder()['setCustomId'](''+_0x2b7e03['customId'])['setLabel'](_0x2b7e03['question'])['setStyle'](TextInputStyle[_0x2b7e03['style']])['setRequired'](_0x2b7e03['required'])['setMaxLength'](0x7d0),_0x336096=new ActionRowBuilder()['addComponents'](_0x521813);_0x4a8ede['addComponents'](_0x336096);});if(_0x1cbf04['Questions']&&_0x1cbf04['Questions']?.['length']>0x0)await _0x3624af['showModal'](_0x4a8ede);const _0x27dd04=new ButtonBuilder()['setCustomId']('closeTicket')['setLabel'](config['Locale']['CloseTicketButton'])['setStyle'](config['ButtonColors']['closeTicket'])['setEmoji'](config['ButtonEmojis']['closeTicket']),_0x21f102=new ButtonBuilder()['setCustomId']('ticketclaim')['setLabel'](config['Locale']['claimTicketButton'])['setEmoji'](config['ButtonEmojis']['ticketClaim'])['setStyle'](config['ButtonColors']['ticketClaim']);let _0x27d1f0='';if(config['ClaimingSystem']['Enabled'])_0x27d1f0=new ActionRowBuilder()['addComponents'](_0x27dd04,_0x21f102);if(config['ClaimingSystem']['Enabled']===![])_0x27d1f0=new ActionRowBuilder()['addComponents'](_0x27dd04);let _0x2d8f82=_0x1cbf04['TicketMessage']['replace'](/{user}/g,'<@!'+_0x3624af['user']['id']+'>')['replace'](/{createdAt}/g,'<t:'+(Date['now']()/0x3e8|0x0)+':R>'),_0x117048=_0x1cbf04['TicketMessageTitle']['replace'](/{category}/g,''+_0x1cbf04['TicketName']);var _0x5f0154=_0x3624af['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400});const _0x503ecb=new EmbedBuilder();if(config['TicketOpenEmbed']['UserIconAuthor'])_0x503ecb['setAuthor']({'name':''+_0x117048,'iconURL':''+_0x5f0154});if(config['TicketOpenEmbed']['UserIconAuthor']===![])_0x503ecb['setAuthor']({'name':''+_0x117048});if(!config['TicketOpenEmbed']['EmbedColor'])_0x503ecb['setColor'](config['EmbedColors']);if(config['TicketOpenEmbed']['EmbedColor'])_0x503ecb['setColor'](config['TicketOpenEmbed']['EmbedColor']);if(config['TicketOpenEmbed']['UserIconThumbnail'])_0x503ecb['setThumbnail'](_0x5f0154);_0x503ecb['setDescription'](''+_0x2d8f82);if(config['ClaimingSystem']['Enabled'])_0x503ecb['addFields']([{'name':''+config['Locale']['ticketClaimedBy'],'value':'>\x20'+config['Locale']['ticketNotClaimed']}]);if(config['TicketOpenEmbed']['FooterMsg'])_0x503ecb['setFooter']({'text':''+config['TicketOpenEmbed']['FooterMsg']});if(config['TicketOpenEmbed']['FooterMsg']&&config['TicketOpenEmbed']['FooterIcon'])_0x503ecb['setFooter']({'text':''+config['TicketOpenEmbed']['FooterMsg'],'iconURL':''+config['TicketOpenEmbed']['FooterIcon']});if(config['TicketOpenEmbed']['Timestamp'])_0x503ecb['setTimestamp']();_0x15a230['send']({'embeds':[_0x503ecb],'components':[_0x27d1f0],'fetchReply':!![]})['then'](async _0x174371=>{let _0x7a98ff=new EmbedBuilder()['setTitle'](config['Locale']['ticketCreatedTitle'])['setColor']('Green')['setDescription'](config['Locale']['ticketCreatedMsg']+'\x20<#'+_0x15a230['id']+'>')['setFooter']({'text':''+_0x3624af['user']['username'],'iconURL':''+_0x3624af['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();const _0x1ca95d=new ActionRowBuilder()['addComponents'](new ButtonBuilder()['setStyle']('Link')['setURL'](''+_0x174371['url'])['setLabel'](config['Locale']['logsTicket'])['setEmoji'](config['ButtonEmojis']['ticketCreated']));if(!_0x1cbf04['Questions']||_0x1cbf04['Questions']?.['length']<0x0)_0x3624af['editReply']({'embeds':[_0x7a98ff],'components':[_0x1ca95d],'ephemeral':!![]});if(_0x1cbf04['Questions']&&_0x1cbf04['Questions']?.['length']>0x0)_0x3624af['followUp']({'embeds':[_0x7a98ff],'components':[_0x1ca95d],'ephemeral':!![]});if(config['TicketSettings']['MentionAuthor'])_0x15a230['send']({'content':'<@!'+_0x3624af['user']['id']+'>'})['then'](_0x24e48f=>setTimeout(()=>_0x24e48f['delete']()['catch'](_0x1515fa=>{}),0x1f4));if(_0x1cbf04['MentionSupportRoles']){let _0x52ce6a=_0x1cbf04['SupportRoles']['map'](_0x56bc04=>{let _0x14afd3=_0x3624af['guild']['roles']['cache']['get'](_0x56bc04);if(_0x14afd3)return _0x14afd3;});_0x15a230['send'](_0x52ce6a['join']('\x20'))['then'](_0x589028=>setTimeout(()=>_0x589028['delete']()['catch'](_0x4e08af=>{}),0x1f4));}await _0xf699bc['tickets']['ensure'](''+_0x15a230['id'],{'userID':_0x3624af['user']['id'],'ticketType':_0x1cbf04['TicketName'],'button':_0x100f05,'msgID':_0x174371['id'],'claimed':![],'claimUser':'','messages':0x0,'lastMessageSent':Date['now'](),'status':'Open','closeUserID':'','channelID':_0x15a230['id'],'questions':_0x1cbf04['Questions'],'ticketCreationDate':Date['now']()}),await _0x174371['pin']();let _0x4cc9e9=config['TicketSettings']['TicketCooldown']*0x3e8;if(config['TicketSettings']['TicketCooldown']>0x0)Cooldown['set'](_0x3624af['user']['id'],Date['now']());if(config['TicketSettings']['TicketCooldown']>0x0)setTimeout(()=>Cooldown['delete'](_0x3624af['user']['id']),_0x4cc9e9);_0xf699bc['emit']('ticketCreate',_0x3624af);});}if(_0x19f694['type']===InteractionType['ModalSubmit']&&_0x19f694['customId']['startsWith']('questionModal')){const _0x485e27=_0x19f694['customId']['substring'](0xd),_0x2eedbd=_0xf699bc['tickets']['get'](''+_0x485e27);let _0x38484f=_0x19f694['guild']['channels']['cache']['get'](_0x2eedbd['channelID']);const _0x398c9e={};_0x2eedbd['questions']['forEach'](_0x5bfdf0=>{const _0xcdeccd=_0x19f694['fields']['getTextInputValue'](_0x5bfdf0['customId']);_0x398c9e[_0x5bfdf0['question']]=_0xcdeccd;});let _0x3f0ec5=config['Locale']['ticketQuestionsTitle']['replace'](/{category}/g,''+_0x2eedbd['ticketType']);const _0x3893a2=new EmbedBuilder()['setTitle'](_0x3f0ec5)['setColor'](config['EmbedColors']);_0x2eedbd['questions']['forEach'](_0x4fce2c=>{const _0x315c9b=_0x398c9e[_0x4fce2c['question']];_0x3893a2['addFields']({'name':_0x4fce2c['question'],'value':'```'+_0x315c9b+'```'||'```'+config['Locale']['notAnswered']+'```'});});if(_0x38484f)_0x38484f['send']({'embeds':[_0x3893a2]});await _0x19f694['reply']({'content':config['Locale']['answeringQuestionsSuccess'],'ephemeral':!![]});}if(_0x590bfd==='button1'){if(!config['TicketButton1']['Questions']||config['TicketButton1']['Questions']?.['length']<0x0)await _0x19f694['deferReply']({'ephemeral':!![]});_0x3f79b3(_0x19f694,config['TicketButton1'],'TicketButton1');}if(_0x590bfd==='button2'){if(!config['TicketButton2']['Questions']||config['TicketButton2']['Questions']?.['length']<0x0)await _0x19f694['deferReply']({'ephemeral':!![]});_0x3f79b3(_0x19f694,config['TicketButton2'],'TicketButton2');}if(_0x590bfd==='button3'){if(!config['TicketButton3']['Questions']||config['TicketButton3']['Questions']?.['length']<0x0)await _0x19f694['deferReply']({'ephemeral':!![]});_0x3f79b3(_0x19f694,config['TicketButton3'],'TicketButton3');}if(_0x590bfd==='button4'){if(!config['TicketButton4']['Questions']||config['TicketButton4']['Questions']?.['length']<0x0)await _0x19f694['deferReply']({'ephemeral':!![]});_0x3f79b3(_0x19f694,config['TicketButton4'],'TicketButton4');}if(_0x590bfd==='button5'){if(!config['TicketButton5']['Questions']||config['TicketButton5']['Questions']?.['length']<0x0)await _0x19f694['deferReply']({'ephemeral':!![]});_0x3f79b3(_0x19f694,config['TicketButton5'],'TicketButton5');}if(_0x590bfd==='button6'){if(!config['TicketButton6']['Questions']||config['TicketButton6']['Questions']?.['length']<0x0)await _0x19f694['deferReply']({'ephemeral':!![]});_0x3f79b3(_0x19f694,config['TicketButton6'],'TicketButton6');}if(_0x590bfd==='button7'){if(!config['TicketButton7']['Questions']||config['TicketButton7']['Questions']?.['length']<0x0)await _0x19f694['deferReply']({'ephemeral':!![]});_0x3f79b3(_0x19f694,config['TicketButton7'],'TicketButton7');}if(_0x590bfd==='button8'){if(!config['TicketButton8']['Questions']||config['TicketButton8']['Questions']?.['length']<0x0)await _0x19f694['deferReply']({'ephemeral':!![]});_0x3f79b3(_0x19f694,config['TicketButton8'],'TicketButton8');}if(_0x19f694['customId']==='closeTicket'){let _0x400ace=utils['checkIfUserHasSupportRoles'](_0x19f694);if(config['TicketSettings']['RestrictTicketClose']&&!_0x400ace)return _0x19f694['reply']({'content':config['Locale']['restrictTicketClose'],'ephemeral':!![]});await _0xf699bc['tickets']['set'](_0x19f694['channel']['id'],_0x19f694['user']['id'],'closeUserID'),await _0xf699bc['emit']('ticketClose',_0x19f694);}if(_0x19f694['customId']==='ticketclaim'){await _0x19f694['deferReply']({'ephemeral':!![]});let _0x493599='\x0a\x0a['+new Date()['toLocaleString']()+']\x20[TICKET\x20CLAIM]\x20User:\x20'+_0x19f694['user']['username'];fs['appendFile']('./logs.txt',_0x493599,_0x3c6238=>{if(_0x3c6238)console['log'](_0x3c6238);});if(config['ClaimingSystem']['Enabled']===![])return _0x19f694['editReply']({'content':'Ticket\x20claiming\x20is\x20disabled\x20in\x20the\x20config!','ephemeral':!![]});let _0x55cea3=utils['checkIfUserHasSupportRoles'](_0x19f694);if(config['ClaimingSystem']['Enabled']&&!_0x55cea3)return _0x19f694['reply']({'content':config['Locale']['restrictTicketClaim'],'ephemeral':!![]});let _0x505f58=config['Locale']['ticketClaimed']['replace'](/{user}/g,'<@!'+_0x19f694['user']['id']+'>');const _0x4862b7=new EmbedBuilder()['setTitle'](config['Locale']['ticketClaimedTitle'])['setColor']('Green')['setDescription'](_0x505f58)['setTimestamp']()['setFooter']({'text':config['Locale']['ticketClaimedBy']+'\x20'+_0x19f694['user']['username'],'iconURL':''+_0x19f694['user']['displayAvatarURL']({'dynamic':!![]})});_0x19f694['editReply']({'content':config['Locale']['claimTicketMsg'],'ephemeral':![]}),_0x19f694['channel']['send']({'embeds':[_0x4862b7],'ephemeral':![]}),_0x19f694['channel']['messages']['fetch'](_0xf699bc['tickets']['get'](''+_0x19f694['channel']['id'],'msgID'))['then'](async _0x3e3441=>{const _0x54a340=_0x3e3441['embeds'][0x0];_0x54a340['fields'][0x0]={'name':''+config['Locale']['ticketClaimedBy'],'value':'>\x20<@!'+_0x19f694['user']['id']+'>\x20('+_0x19f694['user']['username']+')'};const _0x274b88=new ButtonBuilder()['setCustomId']('closeTicket')['setLabel'](config['Locale']['CloseTicketButton'])['setStyle']('Danger')['setEmoji'](config['ButtonEmojis']['closeTicket']),_0x1ff72b=new ButtonBuilder()['setCustomId']('ticketclaim')['setLabel'](config['Locale']['claimTicketButton'])['setEmoji'](config['ButtonEmojis']['ticketClaim'])['setStyle']('Secondary')['setDisabled'](!![]),_0x23a911=new ButtonBuilder()['setCustomId']('ticketunclaim')['setLabel'](config['Locale']['unclaimTicketButton'])['setStyle'](config['ButtonColors']['ticketUnclaim']);let _0x11bf34=new ActionRowBuilder()['addComponents'](_0x274b88,_0x1ff72b,_0x23a911);_0x3e3441['edit']({'embeds':[_0x54a340],'components':[_0x11bf34]}),_0xf699bc['emit']('ticketClaim',_0x19f694);const _0xca4cb7=async(_0xfd54d5,_0x5cab21)=>{await Promise['all'](_0x5cab21['map'](async _0x342cc7=>{const _0x2d88d7=_0xfd54d5['guild']['roles']['cache']['get'](_0x342cc7);_0x2d88d7&&await _0xfd54d5['channel']['permissionOverwrites']['edit'](_0x2d88d7,{'SendMessages':config['ClaimingSystem']['UserPerms']['SendMessages'],'ViewChannel':config['ClaimingSystem']['UserPerms']['ViewChannel']});}));};switch(tButton){case'TicketButton1':await _0xca4cb7(_0x19f694,config['TicketButton1']['SupportRoles']);break;case'TicketButton2':await _0xca4cb7(_0x19f694,config['TicketButton2']['SupportRoles']);break;case'TicketButton3':await _0xca4cb7(_0x19f694,config['TicketButton3']['SupportRoles']);break;case'TicketButton4':await _0xca4cb7(_0x19f694,config['TicketButton4']['SupportRoles']);break;case'TicketButton5':await _0xca4cb7(_0x19f694,config['TicketButton5']['SupportRoles']);break;case'TicketButton6':await _0xca4cb7(_0x19f694,config['TicketButton6']['SupportRoles']);break;case'TicketButton7':await _0xca4cb7(_0x19f694,config['TicketButton7']['SupportRoles']);break;case'TicketButton8':await _0xca4cb7(_0x19f694,config['TicketButton8']['SupportRoles']);break;}await _0x19f694['channel']['permissionOverwrites']['edit'](_0x19f694['user'],{'SendMessages':!![],'ViewChannel':!![],'AttachFiles':!![],'EmbedLinks':!![],'ReadMessageHistory':!![]}),_0xf699bc['tickets']['set'](_0x19f694['channel']['id'],!![],'claimed'),_0xf699bc['tickets']['set'](_0x19f694['channel']['id'],_0x19f694['user']['id'],'claimUser');let _0x1d944a;if(!config['claimTicket']['ChannelID'])_0x1d944a=_0x19f694['guild']['channels']['cache']['get'](config['TicketSettings']['LogsChannelID']);if(config['claimTicket']['ChannelID'])_0x1d944a=_0x19f694['guild']['channels']['cache']['get'](config['claimTicket']['ChannelID']);const _0x6c585a=new EmbedBuilder()['setColor']('Green')['setTitle'](config['Locale']['ticketClaimedLog'])['addFields']([{'name':'•\x20'+config['Locale']['logsExecutor'],'value':'>\x20<@!'+_0x19f694['user']['id']+'>\x0a>\x20'+_0x19f694['user']['username']},{'name':'•\x20'+config['Locale']['logsTicket'],'value':'>\x20<#'+_0x19f694['channel']['id']+'>\x0a>\x20#'+_0x19f694['channel']['name']+'\x0a>\x20'+_0xf699bc['tickets']['get'](''+_0x19f694['channel']['id'],'ticketType')}])['setTimestamp']()['setThumbnail'](_0x19f694['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400}))['setFooter']({'text':''+_0x19f694['user']['username'],'iconURL':''+_0x19f694['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})});if(_0x1d944a&&config['claimTicket']['Enabled'])_0x1d944a['send']({'embeds':[_0x6c585a]});});}if(_0x19f694['customId']==='ticketunclaim'){await _0x19f694['deferReply']({'ephemeral':!![]});let _0x361def='\x0a\x0a['+new Date()['toLocaleString']()+']\x20[TICKET\x20UNCLAIM]\x20User:\x20'+_0x19f694['user']['username'];fs['appendFile']('./logs.txt',_0x361def,_0x2e5553=>{if(_0x2e5553)console['log'](_0x2e5553);});if(config['ClaimingSystem']['Enabled']===![])return _0x19f694['editReply']({'content':'Ticket\x20claiming\x20is\x20disabled\x20in\x20the\x20config!','ephemeral':!![]});if(_0xf699bc['tickets']['get'](''+_0x19f694['channel']['id'],'claimed')===![])return _0x19f694['editReply']({'content':'This\x20ticket\x20has\x20not\x20been\x20claimed!','ephemeral':!![]});let _0x886c8c=config['Locale']['ticketDidntClaim']['replace'](/{user}/g,'<@!'+_0xf699bc['tickets']['get'](''+_0x19f694['channel']['id'],'claimUser')+'>');if(_0xf699bc['tickets']['get'](''+_0x19f694['channel']['id'],'claimUser')!==_0x19f694['user']['id'])return _0x19f694['editReply']({'content':_0x886c8c,'ephemeral':!![]});let _0x567e13=_0xf699bc['tickets']['get'](''+_0x19f694['channel']['id'],'button');const _0x1490fe=async(_0x5be019,_0x1758d0)=>{await Promise['all'](_0x1758d0['map'](async _0x20981b=>{const _0x1d6a3e=_0x5be019['guild']['roles']['cache']['get'](_0x20981b);_0x1d6a3e&&await _0x5be019['channel']['permissionOverwrites']['edit'](_0x1d6a3e,{'SendMessages':!![],'ViewChannel':!![]});}));};switch(_0x567e13){case'TicketButton1':await _0x1490fe(_0x19f694,config['TicketButton1']['SupportRoles']);break;case'TicketButton2':await _0x1490fe(_0x19f694,config['TicketButton2']['SupportRoles']);break;case'TicketButton3':await _0x1490fe(_0x19f694,config['TicketButton3']['SupportRoles']);break;case'TicketButton4':await _0x1490fe(_0x19f694,config['TicketButton4']['SupportRoles']);break;case'TicketButton5':await _0x1490fe(_0x19f694,config['TicketButton5']['SupportRoles']);break;case'TicketButton6':await _0x1490fe(_0x19f694,config['TicketButton6']['SupportRoles']);break;case'TicketButton7':await _0x1490fe(_0x19f694,config['TicketButton7']['SupportRoles']);break;case'TicketButton8':await _0x1490fe(_0x19f694,config['TicketButton8']['SupportRoles']);break;}let _0x2b228e=config['Locale']['ticketUnClaimed']['replace'](/{user}/g,'<@!'+_0x19f694['user']['id']+'>');const _0x32a3b5=new EmbedBuilder()['setTitle'](config['Locale']['ticketUnClaimedTitle'])['setColor']('Red')['setDescription'](_0x2b228e)['setTimestamp']()['setFooter']({'text':config['Locale']['ticketUnClaimedBy']+'\x20'+_0x19f694['user']['username'],'iconURL':''+_0x19f694['user']['displayAvatarURL']({'dynamic':!![]})});_0x19f694['editReply']({'content':config['Locale']['unclaimTicketMsg'],'ephemeral':!![]}),_0x19f694['channel']['send']({'embeds':[_0x32a3b5]}),_0x19f694['channel']['messages']['fetch'](_0xf699bc['tickets']['get'](''+_0x19f694['channel']['id'],'msgID'))['then'](async _0x1ed7b9=>{const _0x36da7a=_0x1ed7b9['embeds'][0x0];_0x36da7a['fields'][0x0]={'name':''+config['Locale']['ticketClaimedBy'],'value':'>\x20'+config['Locale']['ticketNotClaimed']};const _0x2e2cd4=new ButtonBuilder()['setCustomId']('closeTicket')['setLabel'](config['Locale']['CloseTicketButton'])['setStyle'](config['ButtonColors']['closeTicket'])['setEmoji'](config['ButtonEmojis']['closeTicket']),_0x31eef9=new ButtonBuilder()['setCustomId']('ticketclaim')['setLabel'](config['Locale']['claimTicketButton'])['setEmoji'](config['ButtonEmojis']['ticketClaim'])['setStyle'](config['ButtonColors']['ticketClaim']);let _0x32a1ed=new ActionRowBuilder()['addComponents'](_0x2e2cd4,_0x31eef9);_0x1ed7b9['edit']({'embeds':[_0x36da7a],'components':[_0x32a1ed]}),_0xf699bc['tickets']['set'](_0x19f694['channel']['id'],![],'claimed'),_0xf699bc['tickets']['set'](_0x19f694['channel']['id'],'','claimUser');let _0x58843d;if(!config['unclaimTicket']['ChannelID'])_0x58843d=_0x19f694['guild']['channels']['cache']['get'](config['TicketSettings']['LogsChannelID']);if(config['unclaimTicket']['ChannelID'])_0x58843d=_0x19f694['guild']['channels']['cache']['get'](config['unclaimTicket']['ChannelID']);const _0x3bdeeb=new EmbedBuilder()['setColor']('Red')['setTitle'](config['Locale']['ticketUnClaimedLog'])['addFields']([{'name':'•\x20'+config['Locale']['logsExecutor'],'value':'>\x20<@!'+_0x19f694['user']['id']+'>\x0a>\x20'+_0x19f694['user']['username']},{'name':'•\x20'+config['Locale']['logsTicket'],'value':'>\x20<#'+_0x19f694['channel']['id']+'>\x0a>\x20#'+_0x19f694['channel']['name']+'\x0a>\x20'+_0xf699bc['tickets']['get'](''+_0x19f694['channel']['id'],'ticketType')}])['setTimestamp']()['setThumbnail'](_0x19f694['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400}))['setFooter']({'text':''+_0x19f694['user']['username'],'iconURL':''+_0x19f694['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})});if(_0x58843d&&config['unclaimTicket']['Enabled'])_0x58843d['send']({'embeds':[_0x3bdeeb]});});}if(_0x19f694['customId']==='upvote'){await _0x19f694['deferReply']({'ephemeral':!![]});let _0x41db29=config['Locale']['suggestionCantVote']['replace'](/{link}/g,'https://discord.com/channels/'+_0x19f694['guild']['id']+'/'+_0x19f694['channel']['id']+'/'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'msgID')),_0x3e6ead=new EmbedBuilder()['setTitle'](config['Locale']['suggestionCantVoteTitle'])['setColor']('Red')['setDescription'](_0x41db29)['setFooter']({'text':''+_0x19f694['user']['username'],'iconURL':''+_0x19f694['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();if(_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'status')==='Accepted'||_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'status')==='Denied')return _0x19f694['editReply']({'embeds':[_0x3e6ead],'ephemeral':!![]});let _0x212dfd=config['Locale']['suggestionAlreadyVoted']['replace'](/{link}/g,'https://discord.com/channels/'+_0x19f694['guild']['id']+'/'+_0x19f694['channel']['id']+'/'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'msgID')),_0x1b244e=new EmbedBuilder()['setTitle'](config['Locale']['suggestionAlreadyVotedTitle'])['setColor']('Red')['setDescription'](_0x212dfd)['setFooter']({'text':''+_0x19f694['user']['username'],'iconURL':''+_0x19f694['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();if(_0xf699bc['suggestionUsers']['has'](_0x19f694['message']['id']+'_'+_0x19f694['user']['id'])&&_0xf699bc['suggestionUsers']['get'](_0x19f694['message']['id']+'_'+_0x19f694['user']['id'],'userID')===_0x19f694['user']['id']&&_0xf699bc['suggestionUsers']['get'](_0x19f694['message']['id']+'_'+_0x19f694['user']['id'],'msgID')===_0x19f694['message']['id']&&_0xf699bc['suggestionUsers']['get'](_0x19f694['message']['id']+'_'+_0x19f694['user']['id'],'voted')===!![])return _0x19f694['editReply']({'embeds':[_0x1b244e],'ephemeral':!![]});_0xf699bc['suggestions']['inc'](_0x19f694['message']['id'],'upVotes'),_0xf699bc['suggestionUsers']['ensure'](_0x19f694['message']['id']+'_'+_0x19f694['user']['id'],{'userID':_0x19f694['user']['id'],'voted':!![],'voteType':'upvote','msgID':_0x19f694['message']['id']});if(_0xf699bc['suggestionUsers']['get'](_0x19f694['message']['id']+'_'+_0x19f694['user']['id'],'voted')===![])_0xf699bc['suggestionUsers']['set'](_0x19f694['message']['id']+'_'+_0x19f694['user']['id'],!![],'voted');if(_0xf699bc['suggestionUsers']['get'](_0x19f694['message']['id']+'_'+_0x19f694['user']['id'],'voteType')==='downvote')_0xf699bc['suggestionUsers']['set'](_0x19f694['message']['id']+'_'+_0x19f694['user']['id'],'upvote','voteType');_0x19f694['channel']['messages']['fetch'](_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'msgID'))['then'](_0x41f6ac=>{let _0x404406=config['Locale']['suggestionUpvoted']['replace'](/{link}/g,'https://discord.com/channels/'+_0x19f694['guild']['id']+'/'+_0x19f694['channel']['id']+'/'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'msgID')),_0x1eaa14=new EmbedBuilder()['setTitle'](config['Locale']['suggestionUpvotedTitle'])['setColor']('Green')['setDescription'](_0x404406)['setFooter']({'text':''+_0x19f694['user']['username'],'iconURL':''+_0x19f694['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();_0x19f694['editReply']({'embeds':[_0x1eaa14],'ephemeral':!![]});const _0x443ecd=_0x41f6ac['embeds'][0x0];if(config['SuggestionSettings']['EnableAcceptDenySystem'])_0x443ecd['fields'][0x1]={'name':'•\x20'+config['Locale']['suggestionInformation'],'value':'>\x20**'+config['Locale']['suggestionFrom']+'**\x20<@!'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'userID')+'>\x0a>\x20**'+config['Locale']['suggestionUpvotes']+'**\x20'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'upVotes')+'\x0a>\x20**'+config['Locale']['suggestionDownvotes']+'**\x20'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'downVotes')+'\x0a>\x20**'+config['Locale']['suggestionStatus']+'**\x20'+config['SuggestionStatuses']['Pending']};if(config['SuggestionSettings']['EnableAcceptDenySystem']===![])_0x443ecd['fields'][0x1]={'name':'•\x20'+config['Locale']['suggestionInformation'],'value':'>\x20**'+config['Locale']['suggestionFrom']+'**\x20<@!'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'userID')+'>\x0a>\x20**'+config['Locale']['suggestionUpvotes']+'**\x20'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'upVotes')+'\x0a>\x20**'+config['Locale']['suggestionDownvotes']+'**\x20'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'downVotes')};let _0x28274e=_0x19f694['guild']['channels']['cache']['get'](config['SuggestionSettings']['LogsChannel']);const _0x447723=new EmbedBuilder()['setColor']('Green')['setDescription'](config['SuggestionUpvote']['ButtonEmoji']+'\x20|\x20<@!'+_0x19f694['user']['id']+'>\x20('+_0x19f694['user']['username']+')\x20has\x20**upvoted**\x20[this](https://discord.com/channels/'+_0x19f694['guild']['id']+'/'+_0x19f694['channel']['id']+'/'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'msgID')+')\x20suggestion!');if(config['SuggestionSettings']['LogsChannel']&&_0x28274e)_0x28274e['send']({'embeds':[_0x447723]});_0x41f6ac['edit']({'embeds':[_0x443ecd]}),_0xf699bc['globalStats']['inc'](_0x19f694['guild']['id'],'totalSuggestionUpvotes');});}if(_0x19f694['customId']==='downvote'){await _0x19f694['deferReply']({'ephemeral':!![]});let _0x5b365a=config['Locale']['suggestionCantVote']['replace'](/{link}/g,'https://discord.com/channels/'+_0x19f694['guild']['id']+'/'+_0x19f694['channel']['id']+'/'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'msgID')),_0x59760f=new EmbedBuilder()['setTitle'](config['Locale']['suggestionCantVoteTitle'])['setColor']('Red')['setDescription'](_0x5b365a)['setFooter']({'text':''+_0x19f694['user']['username'],'iconURL':''+_0x19f694['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();if(_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'status')==='Accepted'||_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'status')==='Denied')return _0x19f694['editReply']({'embeds':[_0x59760f],'ephemeral':!![]});let _0x31dcf1=config['Locale']['suggestionAlreadyVoted']['replace'](/{link}/g,'https://discord.com/channels/'+_0x19f694['guild']['id']+'/'+_0x19f694['channel']['id']+'/'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'msgID')),_0x3dfd52=new EmbedBuilder()['setTitle'](config['Locale']['suggestionAlreadyVotedTitle'])['setColor']('Red')['setDescription'](_0x31dcf1)['setFooter']({'text':''+_0x19f694['user']['username'],'iconURL':''+_0x19f694['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();if(_0xf699bc['suggestionUsers']['has'](_0x19f694['message']['id']+'_'+_0x19f694['user']['id'])&&_0xf699bc['suggestionUsers']['get'](_0x19f694['message']['id']+'_'+_0x19f694['user']['id'],'userID')===_0x19f694['user']['id']&&_0xf699bc['suggestionUsers']['get'](_0x19f694['message']['id']+'_'+_0x19f694['user']['id'],'msgID')===_0x19f694['message']['id']&&_0xf699bc['suggestionUsers']['get'](_0x19f694['message']['id']+'_'+_0x19f694['user']['id'],'voted')===!![])return _0x19f694['editReply']({'embeds':[_0x3dfd52],'ephemeral':!![]});_0xf699bc['suggestions']['inc'](_0x19f694['message']['id'],'downVotes'),_0xf699bc['suggestionUsers']['ensure'](_0x19f694['message']['id']+'_'+_0x19f694['user']['id'],{'userID':_0x19f694['user']['id'],'voted':!![],'voteType':'downvote','msgID':_0x19f694['message']['id']});if(_0xf699bc['suggestionUsers']['get'](_0x19f694['message']['id']+'_'+_0x19f694['user']['id'],'voted')===![])_0xf699bc['suggestionUsers']['set'](_0x19f694['message']['id']+'_'+_0x19f694['user']['id'],!![],'voted');if(_0xf699bc['suggestionUsers']['get'](_0x19f694['message']['id']+'_'+_0x19f694['user']['id'],'voteType')==='upvote')_0xf699bc['suggestionUsers']['set'](_0x19f694['message']['id']+'_'+_0x19f694['user']['id'],'downvote','voteType');_0x19f694['channel']['messages']['fetch'](_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'msgID'))['then'](_0x32b30d=>{let _0x1fcc8d=config['Locale']['suggestionDownvoted']['replace'](/{link}/g,'https://discord.com/channels/'+_0x19f694['guild']['id']+'/'+_0x19f694['channel']['id']+'/'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'msgID')),_0x507bb8=new EmbedBuilder()['setTitle'](config['Locale']['suggestionDownvotedTitle'])['setColor']('Red')['setDescription'](_0x1fcc8d)['setFooter']({'text':''+_0x19f694['user']['username'],'iconURL':''+_0x19f694['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();_0x19f694['editReply']({'embeds':[_0x507bb8],'ephemeral':!![]});const _0x44034c=_0x32b30d['embeds'][0x0];if(config['SuggestionSettings']['EnableAcceptDenySystem'])_0x44034c['fields'][0x1]={'name':'•\x20'+config['Locale']['suggestionInformation'],'value':'>\x20**'+config['Locale']['suggestionFrom']+'**\x20<@!'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'userID')+'>\x0a>\x20**'+config['Locale']['suggestionUpvotes']+'**\x20'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'upVotes')+'\x0a>\x20**'+config['Locale']['suggestionDownvotes']+'**\x20'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'downVotes')+'\x0a>\x20**'+config['Locale']['suggestionStatus']+'**\x20'+config['SuggestionStatuses']['Pending']};if(config['SuggestionSettings']['EnableAcceptDenySystem']===![])_0x44034c['fields'][0x1]={'name':'•\x20'+config['Locale']['suggestionInformation'],'value':'>\x20**'+config['Locale']['suggestionFrom']+'**\x20<@!'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'userID')+'>\x0a>\x20**'+config['Locale']['suggestionUpvotes']+'**\x20'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'upVotes')+'\x0a>\x20**'+config['Locale']['suggestionDownvotes']+'**\x20'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'downVotes')};let _0x4e36a2=_0x19f694['guild']['channels']['cache']['get'](config['SuggestionSettings']['LogsChannel']);const _0x3baa15=new EmbedBuilder()['setColor']('Red')['setDescription'](config['SuggestionDownvote']['ButtonEmoji']+'\x20|\x20<@!'+_0x19f694['user']['id']+'>\x20('+_0x19f694['user']['username']+')\x20has\x20**downvoted**\x20[this](https://discord.com/channels/'+_0x19f694['guild']['id']+'/'+_0x19f694['channel']['id']+'/'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'msgID')+')\x20suggestion!');if(config['SuggestionSettings']['LogsChannel']&&_0x4e36a2)_0x4e36a2['send']({'embeds':[_0x3baa15]});_0x32b30d['edit']({'embeds':[_0x44034c]}),_0xf699bc['globalStats']['inc'](_0x19f694['guild']['id'],'totalSuggestionDownvotes');});}if(_0x19f694['customId']==='resetvote'){await _0x19f694['deferReply']({'ephemeral':!![]});let _0xefae11=config['Locale']['suggestionNoVote']['replace'](/{link}/g,'https://discord.com/channels/'+_0x19f694['guild']['id']+'/'+_0x19f694['channel']['id']+'/'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'msgID')),_0x4d25bf=new EmbedBuilder()['setTitle'](config['Locale']['suggestionNoVoteTitle'])['setColor']('Red')['setDescription'](_0xefae11)['setFooter']({'text':''+_0x19f694['user']['username'],'iconURL':''+_0x19f694['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();if(!_0xf699bc['suggestionUsers']['has'](_0x19f694['message']['id']+'_'+_0x19f694['user']['id'])||_0xf699bc['suggestionUsers']['get'](_0x19f694['message']['id']+'_'+_0x19f694['user']['id'],'voted')===![])return _0x19f694['editReply']({'embeds':[_0x4d25bf],'ephemeral':!![]});let _0x4e3311=config['Locale']['suggestionCantVote']['replace'](/{link}/g,'https://discord.com/channels/'+_0x19f694['guild']['id']+'/'+_0x19f694['channel']['id']+'/'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'msgID')),_0x466261=new EmbedBuilder()['setTitle'](config['Locale']['suggestionCantVoteTitle'])['setColor']('Red')['setDescription'](_0x4e3311)['setFooter']({'text':''+_0x19f694['user']['username'],'iconURL':''+_0x19f694['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();if(_0xf699bc['suggestionUsers']['get'](_0x19f694['message']['id']+'_'+_0x19f694['user']['id'],'status')==='Accepted'||_0xf699bc['suggestionUsers']['get'](_0x19f694['message']['id']+'_'+_0x19f694['user']['id'],'status')==='Denied')return _0x19f694['editReply']({'embeds':[_0x466261],'ephemeral':!![]});_0xf699bc['suggestionUsers']['set'](_0x19f694['message']['id']+'_'+_0x19f694['user']['id'],![],'voted');if(_0xf699bc['suggestionUsers']['get'](_0x19f694['message']['id']+'_'+_0x19f694['user']['id'],'voteType')==='upvote')_0xf699bc['suggestions']['dec'](_0x19f694['message']['id'],'upVotes');if(_0xf699bc['suggestionUsers']['get'](_0x19f694['message']['id']+'_'+_0x19f694['user']['id'],'voteType')==='downvote')_0xf699bc['suggestions']['dec'](_0x19f694['message']['id'],'downVotes');_0x19f694['channel']['messages']['fetch'](_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'msgID'))['then'](_0x15211f=>{let _0x531276=config['Locale']['suggestionVoteReset']['replace'](/{link}/g,'https://discord.com/channels/'+_0x19f694['guild']['id']+'/'+_0x19f694['channel']['id']+'/'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'msgID')),_0x37cd5b=new EmbedBuilder()['setTitle'](config['Locale']['suggestionVoteResetTitle'])['setColor']('Green')['setDescription'](_0x531276)['setFooter']({'text':''+_0x19f694['user']['username'],'iconURL':''+_0x19f694['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();_0x19f694['editReply']({'embeds':[_0x37cd5b],'ephemeral':!![]});const _0x3d6158=_0x15211f['embeds'][0x0];if(config['SuggestionSettings']['EnableAcceptDenySystem'])_0x3d6158['fields'][0x1]={'name':'•\x20'+config['Locale']['suggestionInformation'],'value':'>\x20**'+config['Locale']['suggestionFrom']+'**\x20<@!'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'userID')+'>\x0a>\x20**'+config['Locale']['suggestionUpvotes']+'**\x20'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'upVotes')+'\x0a>\x20**'+config['Locale']['suggestionDownvotes']+'**\x20'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'downVotes')+'\x0a>\x20**'+config['Locale']['suggestionStatus']+'**\x20'+config['SuggestionStatuses']['Pending']};if(config['SuggestionSettings']['EnableAcceptDenySystem']===![])_0x3d6158['fields'][0x1]={'name':'•\x20'+config['Locale']['suggestionInformation'],'value':'>\x20**'+config['Locale']['suggestionFrom']+'**\x20<@!'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'userID')+'>\x0a>\x20**'+config['Locale']['suggestionUpvotes']+'**\x20'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'upVotes')+'\x0a>\x20**'+config['Locale']['suggestionDownvotes']+'**\x20'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'downVotes')};let _0x5c8797=_0x19f694['guild']['channels']['cache']['get'](config['SuggestionSettings']['LogsChannel']);const _0xa15f47=new EmbedBuilder()['setColor']('Orange')['setDescription'](config['SuggestionResetvote']['ButtonEmoji']+'\x20|\x20<@!'+_0x19f694['user']['id']+'>\x20('+_0x19f694['user']['username']+')\x20has\x20**reset\x20their\x20vote\x20for**\x20[this](https://discord.com/channels/'+_0x19f694['guild']['id']+'/'+_0x19f694['channel']['id']+'/'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'msgID')+')\x20suggestion!');if(config['SuggestionSettings']['LogsChannel']&&_0x5c8797)_0x5c8797['send']({'embeds':[_0xa15f47]});_0x15211f['edit']({'embeds':[_0x3d6158]});});}if(_0x19f694['customId']==='accept'){if(config['SuggestionSettings']['EnableAcceptDenySystem']===![])return;await _0x19f694['deferReply']({'ephemeral':!![]});let _0x4433bf=![];await config['SuggestionSettings']['AllowedRoles']['forEach'](_0x15fdfc=>{role=_0x19f694['guild']['roles']['cache']['get'](_0x15fdfc),role&&(_0x19f694['member']['roles']['cache']['has'](role['id'])&&(_0x4433bf=!![]));});if(_0x4433bf===![])return _0x19f694['editReply']({'content':config['Locale']['suggestionNoPerms'],'ephemeral':!![]});_0xf699bc['suggestionUsers']['set'](_0x19f694['message']['id']+'_'+_0x19f694['user']['id'],'Accepted','status'),_0x19f694['channel']['messages']['fetch'](_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'msgID'))['then'](_0x250bf5=>{let _0x5998d7=config['Locale']['suggestionAccepted']['replace'](/{link}/g,'https://discord.com/channels/'+_0x19f694['guild']['id']+'/'+_0x19f694['channel']['id']+'/'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'msgID')),_0x31aead=new EmbedBuilder()['setTitle'](config['Locale']['suggestionAcceptedTitle'])['setColor']('Green')['setDescription'](_0x5998d7)['setFooter']({'text':''+_0x19f694['user']['username'],'iconURL':''+_0x19f694['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();_0x19f694['editReply']({'embeds':[_0x31aead],'ephemeral':!![]});const _0x4e11d9=_0x250bf5['embeds'][0x0];if(config['SuggestionSettings']['EnableAcceptDenySystem'])_0x4e11d9['fields'][0x1]={'name':'•\x20'+config['Locale']['suggestionInformation'],'value':'>\x20**'+config['Locale']['suggestionFrom']+'**\x20<@!'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'userID')+'>\x0a>\x20**'+config['Locale']['suggestionUpvotes']+'**\x20'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'upVotes')+'\x0a>\x20**'+config['Locale']['suggestionDownvotes']+'**\x20'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'downVotes')+'\x0a>\x20**'+config['Locale']['suggestionStatus']+'**\x20'+config['SuggestionStatuses']['Accepted']};const _0x5a2f28=EmbedBuilder['from'](_0x4e11d9);_0x5a2f28['setColor'](config['SuggestionStatusesEmbedColors']['Accepted']);if(config['SuggestionSettings']['RemoveAllButtonsIfAcceptedOrDenied']===![])_0x250bf5['edit']({'embeds':[_0x5a2f28]});if(config['SuggestionSettings']['RemoveAllButtonsIfAcceptedOrDenied'])_0x250bf5['edit']({'embeds':[_0x5a2f28],'components':[]});let _0x6baf1a=_0x19f694['guild']['channels']['cache']['get'](config['SuggestionSettings']['LogsChannel']);const _0x4bd275=new EmbedBuilder()['setColor']('Green')['setDescription'](config['SuggestionAccept']['ButtonEmoji']+'\x20|\x20<@!'+_0x19f694['user']['id']+'>\x20('+_0x19f694['user']['username']+')\x20has\x20**accepted**\x20[this](https://discord.com/channels/'+_0x19f694['guild']['id']+'/'+_0x19f694['channel']['id']+'/'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'msgID')+')\x20suggestion!');if(config['SuggestionSettings']['LogsChannel']&&_0x6baf1a)_0x6baf1a['send']({'embeds':[_0x4bd275]});});}if(_0x19f694['customId']==='deny'){if(config['SuggestionSettings']['EnableAcceptDenySystem']===![])return;await _0x19f694['deferReply']({'ephemeral':!![]});let _0x1abd75=![];await config['SuggestionSettings']['AllowedRoles']['forEach'](_0x49f799=>{role=_0x19f694['guild']['roles']['cache']['get'](_0x49f799),role&&(_0x19f694['member']['roles']['cache']['has'](role['id'])&&(_0x1abd75=!![]));});if(_0x1abd75===![])return _0x19f694['editReply']({'content':config['Locale']['suggestionNoPerms'],'ephemeral':!![]});_0xf699bc['suggestionUsers']['set'](_0x19f694['message']['id']+'_'+_0x19f694['user']['id'],'Denied','status'),_0x19f694['channel']['messages']['fetch'](_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'msgID'))['then'](_0x2628ed=>{let _0x19bb2d=config['Locale']['suggestionDenied']['replace'](/{link}/g,'https://discord.com/channels/'+_0x19f694['guild']['id']+'/'+_0x19f694['channel']['id']+'/'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'msgID')),_0x32ea62=new EmbedBuilder()['setTitle'](config['Locale']['suggestionDeniedTitle'])['setColor']('Red')['setDescription'](_0x19bb2d)['setFooter']({'text':''+_0x19f694['user']['username'],'iconURL':''+_0x19f694['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();_0x19f694['editReply']({'embeds':[_0x32ea62],'ephemeral':!![]});const _0x2a5fbe=_0x2628ed['embeds'][0x0];if(config['SuggestionSettings']['EnableAcceptDenySystem'])_0x2a5fbe['fields'][0x1]={'name':'•\x20'+config['Locale']['suggestionInformation'],'value':'>\x20**'+config['Locale']['suggestionFrom']+'**\x20<@!'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'userID')+'>\x0a>\x20**'+config['Locale']['suggestionUpvotes']+'**\x20'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'upVotes')+'\x0a>\x20**'+config['Locale']['suggestionDownvotes']+'**\x20'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'downVotes')+'\x0a>\x20**'+config['Locale']['suggestionStatus']+'**\x20'+config['SuggestionStatuses']['Denied']};const _0x397407=EmbedBuilder['from'](_0x2a5fbe);_0x397407['setColor'](config['SuggestionStatusesEmbedColors']['Denied']);if(config['SuggestionSettings']['RemoveAllButtonsIfAcceptedOrDenied']===![])_0x2628ed['edit']({'embeds':[_0x397407]});if(config['SuggestionSettings']['RemoveAllButtonsIfAcceptedOrDenied'])_0x2628ed['edit']({'embeds':[_0x397407],'components':[]});let _0x26cb8e=_0x19f694['guild']['channels']['cache']['get'](config['SuggestionSettings']['LogsChannel']);const _0x510d3b=new EmbedBuilder()['setColor']('Red')['setDescription'](config['SuggestionDeny']['ButtonEmoji']+'\x20|\x20<@!'+_0x19f694['user']['id']+'>\x20('+_0x19f694['user']['username']+')\x20has\x20**denied**\x20[this](https://discord.com/channels/'+_0x19f694['guild']['id']+'/'+_0x19f694['channel']['id']+'/'+_0xf699bc['suggestions']['get'](''+_0x19f694['message']['id'],'msgID')+')\x20suggestion!');if(config['SuggestionSettings']['LogsChannel']&&_0x26cb8e)_0x26cb8e['send']({'embeds':[_0x510d3b]});});}if(_0x19f694['customId']==='ratingSelect'&&_0xf699bc['reviewsData']['get'](_0x19f694['message']['id'],'reviewDMUserMsgID')===_0x19f694['message']['id']&&_0xf699bc['reviewsData']['get'](_0x19f694['message']['id'],'userID')===_0x19f694['user']['id']){const _0x21947f=new ModalBuilder()['setCustomId']('modal-whyRating')['setTitle'](config['Locale']['ticketRating']),_0x15b4b4=new TextInputBuilder()['setCustomId']('textinput-whyRating')['setLabel'](config['Locale']['ticketRating'])['setStyle']('Paragraph')['setMinLength'](config['TicketReviewSettings']['MinimumWords'])['setMaxLength'](config['TicketReviewSettings']['MaximumWords'])['setPlaceholder'](config['Locale']['explainWhyRating'])['setRequired'](!![]),_0x11fed9=new ActionRowBuilder()['addComponents'](_0x15b4b4);_0x21947f['addComponents'](_0x11fed9);if(_0x19f694['values'][0x0]==='one_star'){const _0x4a0b69=[{'rating':0x1,'guildID':config['GuildID'],'userID':_0x19f694['user']['id']}];_0xf699bc['reviews']['push'](config['GuildID'],_0x4a0b69,'ratings');if(config['TicketReviewSettings']['AskWhyModal'])await _0x19f694['showModal'](_0x21947f);_0xf699bc['reviewsData']['set'](_0x19f694['message']['id'],0x1,'rating'),_0xf699bc['globalStats']['inc'](config['GuildID'],'totalReviews');let _0x45851b=_0xf699bc['guilds']['cache']['get'](config['GuildID']),_0x16b949;if(!config['ticketClose']['ChannelID'])_0x16b949=_0x45851b['channels']['cache']['get'](config['TicketSettings']['LogsChannelID']);if(config['ticketClose']['ChannelID'])_0x16b949=_0x45851b['channels']['cache']['get'](config['ticketClose']['ChannelID']);let _0x4a703f='';for(var _0x31a7af=0x0;_0x31a7af<_0xf699bc['reviewsData']['get'](_0x19f694['message']['id'],'rating');_0x31a7af++){_0x4a703f+='⭐';}if(config['TicketReviewSettings']['AskWhyModal']===![])_0x16b949['messages']['fetch'](_0xf699bc['reviewsData']['get'](_0x19f694['message']['id'],'tCloseLogMsgID'))['then'](_0xee0063=>{const _0x430569=_0xee0063['embeds'][0x0];_0x430569['fields'][0x3]={'name':'•\x20'+config['Locale']['ticketRating'],'value':'>\x20'+_0x4a703f+'\x20``('+_0xf699bc['reviewsData']['get'](_0x19f694['message']['id'],'rating')+'/5)``'},_0xee0063['edit']({'embeds':[_0x430569]});});if(config['TicketReviewSettings']['AskWhyModal']===![])_0x19f694['channel']['messages']['fetch'](_0xf699bc['reviewsData']['get'](_0x19f694['message']['id'],'reviewDMUserMsgID'))['then'](_0x232f3b=>{_0x232f3b['edit']({'components':[]}),_0x19f694['reply']({'content':config['TicketReviewSettings']['ReviewMsg'],'ephemeral':!![]});return;});}if(_0x19f694['values'][0x0]==='two_star'){const _0x5acb16=[{'rating':0x2,'guildID':config['GuildID'],'userID':_0x19f694['user']['id']}];_0xf699bc['reviews']['push'](config['GuildID'],_0x5acb16,'ratings');if(config['TicketReviewSettings']['AskWhyModal'])await _0x19f694['showModal'](_0x21947f);_0xf699bc['reviewsData']['set'](_0x19f694['message']['id'],0x2,'rating'),_0xf699bc['globalStats']['inc'](config['GuildID'],'totalReviews');let _0x4d6e59=_0xf699bc['guilds']['cache']['get'](config['GuildID']),_0x3d4567;if(!config['ticketClose']['ChannelID'])_0x3d4567=_0x4d6e59['channels']['cache']['get'](config['TicketSettings']['LogsChannelID']);if(config['ticketClose']['ChannelID'])_0x3d4567=_0x4d6e59['channels']['cache']['get'](config['ticketClose']['ChannelID']);let _0x12a5e5='';for(var _0x31a7af=0x0;_0x31a7af<_0xf699bc['reviewsData']['get'](_0x19f694['message']['id'],'rating');_0x31a7af++){_0x12a5e5+='⭐';}if(config['TicketReviewSettings']['AskWhyModal']===![])_0x3d4567['messages']['fetch'](_0xf699bc['reviewsData']['get'](_0x19f694['message']['id'],'tCloseLogMsgID'))['then'](_0xa0cd51=>{const _0x5f33cc=_0xa0cd51['embeds'][0x0];_0x5f33cc['fields'][0x3]={'name':'•\x20'+config['Locale']['ticketRating'],'value':'>\x20'+_0x12a5e5+'\x20``('+_0xf699bc['reviewsData']['get'](_0x19f694['message']['id'],'rating')+'/5)``'},_0xa0cd51['edit']({'embeds':[_0x5f33cc]});});if(config['TicketReviewSettings']['AskWhyModal']===![])_0x19f694['channel']['messages']['fetch'](_0xf699bc['reviewsData']['get'](_0x19f694['message']['id'],'reviewDMUserMsgID'))['then'](_0x24736d=>{_0x24736d['edit']({'components':[]}),_0x19f694['reply']({'content':config['TicketReviewSettings']['ReviewMsg'],'ephemeral':!![]});return;});}if(_0x19f694['values'][0x0]==='three_star'){const _0x53bd99=[{'rating':0x3,'guildID':config['GuildID'],'userID':_0x19f694['user']['id']}];_0xf699bc['reviews']['push'](config['GuildID'],_0x53bd99,'ratings');if(config['TicketReviewSettings']['AskWhyModal'])await _0x19f694['showModal'](_0x21947f);_0xf699bc['reviewsData']['set'](_0x19f694['message']['id'],0x3,'rating'),_0xf699bc['globalStats']['inc'](config['GuildID'],'totalReviews');let _0x43cfd8=_0xf699bc['guilds']['cache']['get'](config['GuildID']),_0x4ed322;if(!config['ticketClose']['ChannelID'])_0x4ed322=_0x43cfd8['channels']['cache']['get'](config['TicketSettings']['LogsChannelID']);if(config['ticketClose']['ChannelID'])_0x4ed322=_0x43cfd8['channels']['cache']['get'](config['ticketClose']['ChannelID']);let _0x23fbfa='';for(var _0x31a7af=0x0;_0x31a7af<_0xf699bc['reviewsData']['get'](_0x19f694['message']['id'],'rating');_0x31a7af++){_0x23fbfa+='⭐';}if(config['TicketReviewSettings']['AskWhyModal']===![])_0x4ed322['messages']['fetch'](_0xf699bc['reviewsData']['get'](_0x19f694['message']['id'],'tCloseLogMsgID'))['then'](_0x5b8923=>{const _0x525d2d=_0x5b8923['embeds'][0x0];_0x525d2d['fields'][0x3]={'name':'•\x20'+config['Locale']['ticketRating'],'value':'>\x20'+_0x23fbfa+'\x20``('+_0xf699bc['reviewsData']['get'](_0x19f694['message']['id'],'rating')+'/5)``'},_0x5b8923['edit']({'embeds':[_0x525d2d]});});if(config['TicketReviewSettings']['AskWhyModal']===![])_0x19f694['channel']['messages']['fetch'](_0xf699bc['reviewsData']['get'](_0x19f694['message']['id'],'reviewDMUserMsgID'))['then'](_0x49b6c8=>{_0x49b6c8['edit']({'components':[]}),_0x19f694['reply']({'content':config['TicketReviewSettings']['ReviewMsg'],'ephemeral':!![]});return;});}if(_0x19f694['values'][0x0]==='four_star'){const _0x8c3e4e=[{'rating':0x4,'guildID':config['GuildID'],'userID':_0x19f694['user']['id']}];_0xf699bc['reviews']['push'](config['GuildID'],_0x8c3e4e,'ratings');if(config['TicketReviewSettings']['AskWhyModal'])await _0x19f694['showModal'](_0x21947f);_0xf699bc['reviewsData']['set'](_0x19f694['message']['id'],0x4,'rating'),_0xf699bc['globalStats']['inc'](config['GuildID'],'totalReviews');let _0x1571fa=_0xf699bc['guilds']['cache']['get'](config['GuildID']),_0x4a5fc7;if(!config['ticketClose']['ChannelID'])_0x4a5fc7=_0x1571fa['channels']['cache']['get'](config['TicketSettings']['LogsChannelID']);if(config['ticketClose']['ChannelID'])_0x4a5fc7=_0x1571fa['channels']['cache']['get'](config['ticketClose']['ChannelID']);let _0x471514='';for(var _0x31a7af=0x0;_0x31a7af<_0xf699bc['reviewsData']['get'](_0x19f694['message']['id'],'rating');_0x31a7af++){_0x471514+='⭐';}if(config['TicketReviewSettings']['AskWhyModal']===![])_0x4a5fc7['messages']['fetch'](_0xf699bc['reviewsData']['get'](_0x19f694['message']['id'],'tCloseLogMsgID'))['then'](_0x358886=>{const _0xb2fe8b=_0x358886['embeds'][0x0];_0xb2fe8b['fields'][0x3]={'name':'•\x20'+config['Locale']['ticketRating'],'value':'>\x20'+_0x471514+'\x20``('+_0xf699bc['reviewsData']['get'](_0x19f694['message']['id'],'rating')+'/5)``'},_0x358886['edit']({'embeds':[_0xb2fe8b]});});if(config['TicketReviewSettings']['AskWhyModal']===![])_0x19f694['channel']['messages']['fetch'](_0xf699bc['reviewsData']['get'](_0x19f694['message']['id'],'reviewDMUserMsgID'))['then'](_0x14f2a3=>{_0x14f2a3['edit']({'components':[]}),_0x19f694['reply']({'content':config['TicketReviewSettings']['ReviewMsg'],'ephemeral':!![]});return;});}if(_0x19f694['values'][0x0]==='five_star'){const _0x5a496e=[{'rating':0x5,'guildID':config['GuildID'],'userID':_0x19f694['user']['id']}];_0xf699bc['reviews']['push'](config['GuildID'],_0x5a496e,'ratings');if(config['TicketReviewSettings']['AskWhyModal'])await _0x19f694['showModal'](_0x21947f);_0xf699bc['reviewsData']['set'](_0x19f694['message']['id'],0x5,'rating'),_0xf699bc['globalStats']['inc'](config['GuildID'],'totalReviews');let _0x3d7311=_0xf699bc['guilds']['cache']['get'](config['GuildID']),_0x11e0ae;if(!config['ticketClose']['ChannelID'])_0x11e0ae=_0x3d7311['channels']['cache']['get'](config['TicketSettings']['LogsChannelID']);if(config['ticketClose']['ChannelID'])_0x11e0ae=_0x3d7311['channels']['cache']['get'](config['ticketClose']['ChannelID']);let _0x3d0eaf='';for(var _0x31a7af=0x0;_0x31a7af<_0xf699bc['reviewsData']['get'](_0x19f694['message']['id'],'rating');_0x31a7af++){_0x3d0eaf+='⭐';}if(config['TicketReviewSettings']['AskWhyModal']===![])_0x11e0ae['messages']['fetch'](_0xf699bc['reviewsData']['get'](_0x19f694['message']['id'],'tCloseLogMsgID'))['then'](_0x4f2000=>{const _0x51d228=_0x4f2000['embeds'][0x0];_0x51d228['fields'][0x3]={'name':'•\x20'+config['Locale']['ticketRating'],'value':'>\x20'+_0x3d0eaf+'\x20``('+_0xf699bc['reviewsData']['get'](_0x19f694['message']['id'],'rating')+'/5)``'},_0x4f2000['edit']({'embeds':[_0x51d228]});});if(config['TicketReviewSettings']['AskWhyModal']===![])_0x19f694['channel']['messages']['fetch'](_0xf699bc['reviewsData']['get'](_0x19f694['message']['id'],'reviewDMUserMsgID'))['then'](_0x3d049b=>{_0x3d049b['edit']({'components':[]}),_0x19f694['reply']({'content':config['TicketReviewSettings']['ReviewMsg'],'ephemeral':!![]});return;});}}if(_0x19f694['type']===InteractionType['ModalSubmit']&&config['TicketReviewSettings']['AskWhyModal']&&!_0x19f694['customId']['startsWith']('questionModal')){await _0x19f694['deferReply']({'ephemeral':!![]});if(_0x19f694['customId']==='modal-whyRating'&&_0xf699bc['reviewsData']['get'](_0x19f694['message']['id'],'reviewDMUserMsgID')===_0x19f694['message']['id']&&_0xf699bc['reviewsData']['get'](_0x19f694['message']['id'],'userID')===_0x19f694['user']['id']){const _0x26e391=_0x19f694['fields']['getTextInputValue']('textinput-whyRating');let _0x30fa87=_0xf699bc['guilds']['cache']['get'](config['GuildID']),_0x3239b4;if(!config['ticketClose']['ChannelID'])_0x3239b4=_0x30fa87['channels']['cache']['get'](config['TicketSettings']['LogsChannelID']);if(config['ticketClose']['ChannelID'])_0x3239b4=_0x30fa87['channels']['cache']['get'](config['ticketClose']['ChannelID']);await _0x19f694['channel']['messages']['fetch'](_0xf699bc['reviewsData']['get'](_0x19f694['message']['id'],'reviewDMUserMsgID'))['then'](_0x299021=>{_0x299021['edit']({'components':[]});}),await _0x19f694['editReply']({'content':config['TicketReviewSettings']['ReviewMsg'],'ephemeral':!![]});let _0x16d913='';for(var _0x31a7af=0x0;_0x31a7af<_0xf699bc['reviewsData']['get'](_0x19f694['message']['id'],'rating');_0x31a7af++){_0x16d913+='⭐';}let _0x27d540=_0xf699bc['users']['cache']['get'](_0xf699bc['reviewsData']['get'](_0x19f694['message']['id'],'ticketCreatorID')),_0x1db2cc=_0x30fa87['channels']['cache']['get'](config['TicketReviewSettings']['ReviewChannelID']);const _0x2f12d4=new EmbedBuilder()['setTitle'](config['Locale']['newTicketReview']+'\x20(#'+_0xf699bc['globalStats']['get'](''+_0x30fa87['id'],'totalReviews')+')')['setColor'](config['EmbedColors'])['setThumbnail'](_0x19f694['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400}))['addFields']([{'name':''+config['Locale']['ticketInformationCloseDM'],'value':'>\x20'+config['Locale']['logsTicketAuthor']+':\x20<@!'+_0x27d540['id']+'>\x20('+_0x27d540['username']+')\x0a>\x20'+config['Locale']['categoryCloseDM']+'\x20'+_0xf699bc['reviewsData']['get'](''+_0x19f694['message']['id'],'category')+'\x0a>\x20'+config['Locale']['totalMessagesLog']+'\x20'+_0xf699bc['reviewsData']['get'](''+_0x19f694['message']['id'],'totalMessages')},{'name':''+config['Locale']['ticketReview'],'value':'>\x20'+_0x16d913+'\x0a>\x20'+_0x26e391}])['setTimestamp']()['setFooter']({'text':''+_0x19f694['user']['username'],'iconURL':''+_0x19f694['user']['displayAvatarURL']({'dynamic':!![]})});if(_0x1db2cc)_0x1db2cc['send']({'embeds':[_0x2f12d4]});await _0x3239b4['messages']['fetch'](_0xf699bc['reviewsData']['get'](_0x19f694['message']['id'],'tCloseLogMsgID'))['then'](async _0x9c81dc=>{const _0x6f75ea=_0x9c81dc['embeds'][0x0];_0x6f75ea['fields'][0x3]={'name':'•\x20'+config['Locale']['ticketRating'],'value':'>\x20'+_0x16d913+'\x20``('+_0xf699bc['reviewsData']['get'](_0x19f694['message']['id'],'rating')+'/5)``\x0a>\x20'+_0x26e391},await _0x9c81dc['edit']({'embeds':[_0x6f75ea]});});}}if(_0x19f694['customId']==='deleteTicket'){let _0x51aae7=utils['checkIfUserHasSupportRoles'](_0x19f694);if(!_0x51aae7)return _0x19f694['reply']({'content':config['Locale']['notAllowedDelete'],'ephemeral':!![]});_0x19f694['channel']['messages']['fetch'](_0xf699bc['tickets']['get'](_0x19f694['channel']['id'],'archiveMsgID'))['then'](_0x262fe0=>{_0x262fe0['delete']();});if(config['ArchiveTickets']['Enabled']===![])await _0xf699bc['tickets']['set'](_0x19f694['channel']['id'],_0x19f694['user']['id'],'closeUserID');await _0xf699bc['emit']('ticketClose',_0x19f694);}if(_0x19f694['customId']==='reOpen'){await _0x19f694['deferReply']();let _0x47fd4d=_0xf699bc['tickets']['get'](''+_0x19f694['channel']['id'],'button'),_0x48c37c=_0xf699bc['users']['cache']['get'](_0xf699bc['tickets']['get'](''+_0x19f694['channel']['id'],'userID')),_0x57e777=_0x19f694['guild']['channels']['cache']['get'](_0x19f694['channel']['id']),_0xbaa33c=config['Locale']['ticketReOpenedBy']['replace'](/{user}/g,'<@!'+_0x19f694['user']['id']+'>')['replace'](/{username}/g,''+_0x19f694['user']['username']);const _0x4b2f56=new EmbedBuilder()['setColor']('Green')['setDescription'](_0xbaa33c);if(_0x47fd4d==='TicketButton1'){if(config['TicketButton1']['ClosedCategoryID']&&_0x57e777['parentId']!==config['TicketButton1']['TicketCategoryID'])await _0x57e777['setParent'](config['TicketButton1']['TicketCategoryID'],{'lockPermissions':![]});await config['TicketButton1']['SupportRoles']['forEach'](_0x339016=>{role=_0x19f694['guild']['roles']['cache']['get'](_0x339016),role&&_0x19f694['channel']['permissionOverwrites']['create'](role['id'],{'ViewChannel':!![],'SendMessages':!![],'AttachFiles':!![],'EmbedLinks':!![],'ReadMessageHistory':!![]});});let _0x4d615c=config['TicketButton1']['ChannelName']['replace'](/{username}/g,''+_0x48c37c['username'])['replace'](/{total-tickets}/g,''+_0xf699bc['globalStats']['get'](''+_0x19f694['guild']['id'],'totalTickets'))['replace'](/{user-id}/g,''+_0x48c37c['id']);if(config['ArchiveTickets']['RenameClosedTicket'])_0x19f694['channel']['setName'](''+_0x4d615c);}else{if(_0x47fd4d==='TicketButton2'){if(config['TicketButton2']['ClosedCategoryID']&&_0x57e777['parentId']!==config['TicketButton2']['TicketCategoryID'])await _0x57e777['setParent'](config['TicketButton2']['TicketCategoryID'],{'lockPermissions':![]});await config['TicketButton2']['SupportRoles']['forEach'](_0x585f13=>{role=_0x19f694['guild']['roles']['cache']['get'](_0x585f13),role&&_0x19f694['channel']['permissionOverwrites']['create'](role['id'],{'ViewChannel':!![],'SendMessages':!![],'AttachFiles':!![],'EmbedLinks':!![],'ReadMessageHistory':!![]});});let _0x3162f6=config['TicketButton2']['ChannelName']['replace'](/{username}/g,''+_0x48c37c['username'])['replace'](/{total-tickets}/g,''+_0xf699bc['globalStats']['get'](''+_0x19f694['guild']['id'],'totalTickets'))['replace'](/{user-id}/g,''+_0x48c37c['id']);if(config['ArchiveTickets']['RenameClosedTicket'])_0x19f694['channel']['setName'](''+_0x3162f6);}else{if(_0x47fd4d==='TicketButton3'){if(config['TicketButton3']['ClosedCategoryID']&&_0x57e777['parentId']!==config['TicketButton3']['TicketCategoryID'])await _0x57e777['setParent'](config['TicketButton3']['TicketCategoryID'],{'lockPermissions':![]});await config['TicketButton3']['SupportRoles']['forEach'](_0x11b8d0=>{role=_0x19f694['guild']['roles']['cache']['get'](_0x11b8d0),role&&_0x19f694['channel']['permissionOverwrites']['create'](role['id'],{'ViewChannel':!![],'SendMessages':!![],'AttachFiles':!![],'EmbedLinks':!![],'ReadMessageHistory':!![]});});let _0x3dc995=config['TicketButton3']['ChannelName']['replace'](/{username}/g,''+_0x48c37c['username'])['replace'](/{total-tickets}/g,''+_0xf699bc['globalStats']['get'](''+_0x19f694['guild']['id'],'totalTickets'))['replace'](/{user-id}/g,''+_0x48c37c['id']);if(config['ArchiveTickets']['RenameClosedTicket'])_0x19f694['channel']['setName'](''+_0x3dc995);}else{if(_0x47fd4d==='TicketButton4'){if(config['TicketButton4']['ClosedCategoryID']&&_0x57e777['parentId']!==config['TicketButton4']['TicketCategoryID'])await _0x57e777['setParent'](config['TicketButton4']['TicketCategoryID'],{'lockPermissions':![]});await config['TicketButton4']['SupportRoles']['forEach'](_0x33fe95=>{role=_0x19f694['guild']['roles']['cache']['get'](_0x33fe95),role&&_0x19f694['channel']['permissionOverwrites']['create'](role['id'],{'ViewChannel':!![],'SendMessages':!![],'AttachFiles':!![],'EmbedLinks':!![],'ReadMessageHistory':!![]});});let _0x2bcda2=config['TicketButton4']['ChannelName']['replace'](/{username}/g,''+_0x48c37c['username'])['replace'](/{total-tickets}/g,''+_0xf699bc['globalStats']['get'](''+_0x19f694['guild']['id'],'totalTickets'))['replace'](/{user-id}/g,''+_0x48c37c['id']);if(config['ArchiveTickets']['RenameClosedTicket'])_0x19f694['channel']['setName'](''+_0x2bcda2);}else{if(_0x47fd4d==='TicketButton5'){if(config['TicketButton5']['ClosedCategoryID']&&_0x57e777['parentId']!==config['TicketButton5']['TicketCategoryID'])await _0x57e777['setParent'](config['TicketButton5']['TicketCategoryID'],{'lockPermissions':![]});await config['TicketButton5']['SupportRoles']['forEach'](_0x4422a8=>{role=_0x19f694['guild']['roles']['cache']['get'](_0x4422a8),role&&_0x19f694['channel']['permissionOverwrites']['create'](role['id'],{'ViewChannel':!![],'SendMessages':!![],'AttachFiles':!![],'EmbedLinks':!![],'ReadMessageHistory':!![]});});let _0x21753c=config['TicketButton5']['ChannelName']['replace'](/{username}/g,''+_0x48c37c['username'])['replace'](/{total-tickets}/g,''+_0xf699bc['globalStats']['get'](''+_0x19f694['guild']['id'],'totalTickets'))['replace'](/{user-id}/g,''+_0x48c37c['id']);if(config['ArchiveTickets']['RenameClosedTicket'])_0x19f694['channel']['setName'](''+_0x21753c);}else{if(_0x47fd4d==='TicketButton6'){if(config['TicketButton6']['ClosedCategoryID']&&_0x57e777['parentId']!==config['TicketButton6']['TicketCategoryID'])await _0x57e777['setParent'](config['TicketButton6']['TicketCategoryID'],{'lockPermissions':![]});await config['TicketButton6']['SupportRoles']['forEach'](_0x30e8b5=>{role=_0x19f694['guild']['roles']['cache']['get'](_0x30e8b5),role&&_0x19f694['channel']['permissionOverwrites']['create'](role['id'],{'ViewChannel':!![],'SendMessages':!![],'AttachFiles':!![],'EmbedLinks':!![],'ReadMessageHistory':!![]});});let _0x5b791a=config['TicketButton6']['ChannelName']['replace'](/{username}/g,''+_0x48c37c['username'])['replace'](/{total-tickets}/g,''+_0xf699bc['globalStats']['get'](''+_0x19f694['guild']['id'],'totalTickets'))['replace'](/{user-id}/g,''+_0x48c37c['id']);if(config['ArchiveTickets']['RenameClosedTicket'])_0x19f694['channel']['setName'](''+_0x5b791a);}else{if(_0x47fd4d==='TicketButton7'){if(config['TicketButton7']['ClosedCategoryID']&&_0x57e777['parentId']!==config['TicketButton7']['TicketCategoryID'])await _0x57e777['setParent'](config['TicketButton7']['TicketCategoryID'],{'lockPermissions':![]});await config['TicketButton7']['SupportRoles']['forEach'](_0x4b5bbe=>{role=_0x19f694['guild']['roles']['cache']['get'](_0x4b5bbe),role&&_0x19f694['channel']['permissionOverwrites']['create'](role['id'],{'ViewChannel':!![],'SendMessages':!![],'AttachFiles':!![],'EmbedLinks':!![],'ReadMessageHistory':!![]});});let _0xeebfdd=config['TicketButton7']['ChannelName']['replace'](/{username}/g,''+_0x48c37c['username'])['replace'](/{total-tickets}/g,''+_0xf699bc['globalStats']['get'](''+_0x19f694['guild']['id'],'totalTickets'))['replace'](/{user-id}/g,''+_0x48c37c['id']);if(config['ArchiveTickets']['RenameClosedTicket'])_0x19f694['channel']['setName'](''+_0xeebfdd);}else{if(_0x47fd4d==='TicketButton8'){if(config['TicketButton8']['ClosedCategoryID']&&_0x57e777['parentId']!==config['TicketButton8']['TicketCategoryID'])await _0x57e777['setParent'](config['TicketButton8']['TicketCategoryID'],{'lockPermissions':![]});await config['TicketButton8']['SupportRoles']['forEach'](_0x4a3648=>{role=_0x19f694['guild']['roles']['cache']['get'](_0x4a3648),role&&_0x19f694['channel']['permissionOverwrites']['create'](role['id'],{'ViewChannel':!![],'SendMessages':!![],'AttachFiles':!![],'EmbedLinks':!![],'ReadMessageHistory':!![]});});let _0x4fcd77=config['TicketButton8']['ChannelName']['replace'](/{username}/g,''+_0x48c37c['username'])['replace'](/{total-tickets}/g,''+_0xf699bc['globalStats']['get'](''+_0x19f694['guild']['id'],'totalTickets'))['replace'](/{user-id}/g,''+_0x48c37c['id']);if(config['ArchiveTickets']['RenameClosedTicket'])_0x19f694['channel']['setName'](''+_0x4fcd77);}}}}}}}}let _0x42648c=await _0xf699bc['users']['cache']['get'](_0xf699bc['tickets']['get'](''+_0x19f694['channel']['id'],'claimUser'));await _0x19f694['channel']['permissionOverwrites']['create'](_0x48c37c['id'],{'ViewChannel':!![],'SendMessages':!![],'AttachFiles':!![],'EmbedLinks':!![],'ReadMessageHistory':!![]});if(_0x42648c&&config['ClaimingSystem']['Enabled'])await _0x19f694['channel']['permissionOverwrites']['create'](_0x42648c['id'],{'ViewChannel':!![],'SendMessages':!![],'AttachFiles':!![],'EmbedLinks':!![],'ReadMessageHistory':!![]});await _0x19f694['channel']['messages']['fetch'](_0xf699bc['tickets']['get'](_0x19f694['channel']['id'],'archiveMsgID'))['then'](_0x1ce508=>{_0x1ce508['delete']();}),await _0xf699bc['tickets']['set'](_0x19f694['channel']['id'],'Open','status'),await _0x19f694['followUp']({'embeds':[_0x4b2f56]});}if(_0x19f694['customId']==='createTranscript'){let _0x43fe3a=utils['checkIfUserHasSupportRoles'](_0x19f694);if(!_0x43fe3a)return _0x19f694['reply']({'content':config['Locale']['notAllowedTranscript'],'ephemeral':!![]});let _0xd3755c=_0xf699bc['users']['cache']['get'](_0xf699bc['tickets']['get'](''+_0x19f694['channel']['id'],'userID')),_0x4fe7de=await utils['saveTranscript'](_0x19f694),_0x4c3bf7=config['Locale']['transcriptSavedBy']['replace'](/{user}/g,'<@!'+_0x19f694['user']['id']+'>');const _0x2b20c2=new EmbedBuilder()['setColor'](config['EmbedColors'])['setTitle'](config['Locale']['ticketTranscript'])['setDescription'](_0x4c3bf7)['addFields']([{'name':''+config['Locale']['logsTicketAuthor'],'value':'<@!'+_0xd3755c['id']+'>\x0a'+_0xd3755c['username'],'inline':!![]},{'name':''+config['Locale']['ticketName'],'value':'<#'+_0x19f694['channel']['id']+'>\x0a'+_0x19f694['channel']['name'],'inline':!![]},{'name':''+config['Locale']['ticketTranscriptCategory'],'value':''+_0xf699bc['tickets']['get'](''+_0x19f694['channel']['id'],'ticketType'),'inline':!![]}])['setFooter']({'text':''+_0xd3755c['username'],'iconURL':''+_0xd3755c['displayAvatarURL']({'dynamic':!![]})})['setTimestamp']();let _0x2a9ed8=_0x19f694['guild']['channels']['cache']['get'](config['ArchiveTickets']['TranscriptChannelID']);if(!_0x2a9ed8)return _0x19f694['reply']({'content':'Transcript\x20channel\x20has\x20not\x20been\x20setup\x20in\x20the\x20config!','ephemeral':!![]});if(_0x2a9ed8)_0x2a9ed8['send']({'embeds':[_0x2b20c2],'files':[_0x4fe7de]});let _0x4de1af=config['Locale']['transcriptSaved']['replace'](/{channel}/g,'<#'+_0x2a9ed8['id']+'>');_0x19f694['reply']({'content':_0x4de1af,'ephemeral':!![]});}};