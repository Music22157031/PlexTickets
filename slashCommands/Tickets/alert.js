const _0x3f7276=(function(){let _0x3ae336=!![];return function(_0x108bff,_0x4c7bcc){const _0x1b3f4a=_0x3ae336?function(){if(_0x4c7bcc){const _0xe61ae7=_0x4c7bcc['apply'](_0x108bff,arguments);return _0x4c7bcc=null,_0xe61ae7;}}:function(){};return _0x3ae336=![],_0x1b3f4a;};}()),_0x4189f8=_0x3f7276(this,function(){return _0x4189f8['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0x4189f8)['search']('(((.+)+)+)+$');});_0x4189f8();const {SlashCommandBuilder}=require('@discordjs/builders'),Discord=require('discord.js'),fs=require('fs'),yaml=require('js-yaml'),config=yaml['load'](fs['readFileSync']('./config.yml','utf8')),commands=yaml['load'](fs['readFileSync']('./commands.yml','utf8')),utils=require('../../utils.js'),ms=require('ms');module['exports']={'enabled':commands['Ticket']['Alert']['Enabled'],'data':new SlashCommandBuilder()['setName']('alert')['setDescription'](commands['Ticket']['Alert']['Description']),async 'execute'(_0x2d92ef,_0x5545e1){if(!_0x5545e1['tickets']['has'](_0x2d92ef['channel']['id']))return _0x2d92ef['reply']({'content':config['Locale']['NotInTicketChannel'],'ephemeral':!![]});if(config['TicketAlert']['Enabled']===![])return _0x2d92ef['reply']({'content':'This\x20command\x20has\x20been\x20disabled\x20in\x20the\x20config!','ephemeral':!![]});let _0x23a1fe=utils['checkIfUserHasSupportRoles'](_0x2d92ef);if(!_0x23a1fe)return _0x2d92ef['reply']({'content':config['Locale']['NoPermsMessage'],'ephemeral':!![]});let _0xf6f691=await _0x5545e1['users']['cache']['get'](_0x5545e1['tickets']['get'](''+_0x2d92ef['channel']['id'],'userID'));const _0x1fb38b=new Discord['ButtonBuilder']()['setCustomId']('closeTicket')['setLabel'](config['Locale']['CloseTicketButton'])['setStyle'](config['ButtonColors']['closeTicket'])['setEmoji'](config['ButtonEmojis']['closeTicket']);let _0x217c5e=new Discord['ActionRowBuilder']()['addComponents'](_0x1fb38b);const _0x594df6=Math['floor'](ms(config['TicketAlert']['Time'])/0x3e8),_0xbc8654=Math['floor'](Date['now']()/0x3e8)+_0x594df6;let _0x2a674a=config['TicketAlert']['Message']['replace'](/{time}/g,'<t:'+_0xbc8654+':R>');const _0x2abaec=new Discord['EmbedBuilder']()['setColor'](config['EmbedColors'])['setAuthor']({'name':''+config['TicketAlert']['Title'],'iconURL':'https://i.imgur.com/FxQkyLb.png'})['setDescription'](_0x2a674a)['setTimestamp']();let _0x2e76a0=config['TicketAlert']['DMMessage']['replace'](/{time}/g,'<t:'+_0xbc8654+':R>')['replace'](/{channel}/g,'<#'+_0x2d92ef['channel']['id']+'>');const _0xb326da=new Discord['EmbedBuilder']()['setColor'](config['EmbedColors'])['setAuthor']({'name':''+config['TicketAlert']['Title'],'iconURL':'https://i.imgur.com/FxQkyLb.png'})['setDescription'](_0x2e76a0)['setTimestamp']();if(config['TicketAlert']['DMUser'])try{_0xf6f691['send']({'embeds':[_0xb326da]});}catch(_0x15feb4){console['log']('\x1b[33m%s\x1b[0m','[INFO]\x20I\x20tried\x20to\x20DM\x20a\x20user,\x20but\x20their\x20DM\x27s\x20are\x20locked.');let _0x40e8ff='\x0a\x0a['+new Date()['toLocaleString']()+']\x20[ERROR]\x20'+_0x15feb4['stack'];await fs['appendFile']('./logs.txt',_0x40e8ff,_0x272f60=>{if(_0x272f60)console['log'](_0x272f60);});}_0x2d92ef['reply']({'content':'<@!'+_0xf6f691['id']+'>','embeds':[_0x2abaec],'components':[_0x217c5e],'fetchReply':!![]})['then'](async function(_0x29f9ad){await _0x5545e1['tickets']['set'](_0x2d92ef['channel']['id'],Date['now'](),'closeNotificationTime'),await _0x5545e1['tickets']['set'](_0x2d92ef['channel']['id'],_0x29f9ad['id'],'closeNotificationMsgID'),await _0x5545e1['tickets']['set'](_0x2d92ef['channel']['id'],_0x2d92ef['user']['id'],'closeNotificationUserID'),await _0x5545e1['tickets']['set'](_0x2d92ef['channel']['id'],_0x2d92ef['channel']['id'],'channelID'),await _0x5545e1['tickets']['set'](_0x2d92ef['channel']['id'],_0x2d92ef['user']['id'],'closeUserID'),await _0x5545e1['tickets']['set'](_0x2d92ef['channel']['id'],'Closed\x20automatically\x20after\x20time\x20has\x20passed\x20with\x20no\x20response\x20(Alert\x20command)','closeReason');});}};